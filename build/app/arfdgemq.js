/*! Built with http://stenciljs.com */
const{h:e}=window.App;import{a as i,b as s}from"./chunk-d3ec1289.js";const t=60,l={goalNumberOfSuccesses:3,initialFeedTimer:2,initialGameTimer:5,name:"easy"},a={goalNumberOfSuccesses:5,initialFeedTimer:2,initialGameTimer:6,name:"medium"},n={goalNumberOfSuccesses:7,initialFeedTimer:2,initialGameTimer:7,name:"hard"},r={buttonLabel:"Yay!",heading:"You Won!",text:"Congratulations on successfully helping your Dragon find a happy life!"},u={buttonLabel:"Try again!",heading:"Oh noes!",text:"Unfortunately, you didn't do so well this timeâ€¦"},d=1,c=2,h=30;class o{constructor(){this.feedingClass="",this.generalCluesDisabled=!0,this.resultButtonLabel="",this.resultHeading="",this.resultText="",this.specificCluesDisabled=!0,this.difficultyLevel="",this.clueTimer=0,this.feedTimer=0,this.gameTimer=0,this.goalNumberOfSuccesses=0,this.initialFeedTimer=0,this.initialGameTimer=0,this.initialNumberOfClues=3,this.isRunning=!1,this.remainingClues=0,this.successesUntilVictory=0}componentDidLoad(){this.setDifficulty(l),this.dialog=new s(document.querySelector("#game-over-dialog")),this.dialog.listen("MDCDialog:accept",()=>{this.resetGame()}),this.dialog.listen("MDCDialog:cancel",()=>{this.resetGame()})}render(){return e("section",{class:"app-home"},e("div",{class:"difficulty-controls"},e("pd-button",{label:"Easy",onClick:this.setDifficulty.bind(this,l),disabled:this.isRunning,selected:"easy"===this.difficultyLevel,color:"green"}),e("pd-button",{label:"Medium",onClick:this.setDifficulty.bind(this,a),disabled:this.isRunning,selected:"medium"===this.difficultyLevel,color:"yellow"}),e("pd-button",{label:"Hard",onClick:this.setDifficulty.bind(this,n),disabled:this.isRunning,selected:"hard"===this.difficultyLevel,color:"red"})),e("div",{class:"game-controls"},e("pd-button",{label:this.isRunning?"Pause":"Start",onClick:this.playOrPause.bind(this),primary:!0,color:"green"}),e("pd-button",{label:"Reset",onClick:this.resetGame.bind(this),disabled:this.isRunning})),e("div",{class:"timers"},e("div",null,e("p",null,"Game time left:"),e("p",{class:"timer"},this.gameTimer)),e("div",{class:this.isFeedingAllowed()?"warning":""},e("p",null,"Feeder time left:"),e("p",{class:"timer"},this.feedTimer))),e("div",null,e("pd-button",{label:"Feed!",onClick:this.feed.bind(this),disabled:!this.isFeedingAllowed(),primary:!0,color:"red"})),e("div",{class:"successes"},e("div",null,"Number of",e("br",null),"successes left:"),e("div",{class:"counter"},this.successesUntilVictory)),e("p",null,e("pd-button",{label:"Log success",onClick:this.logSuccess.bind(this),disabled:!this.isRunning,primary:!0})),e("div",null,e("p",null,"Remaining clues: ",e("b",null,this.remainingClues)),e("div",{class:"clue-buttons"},e("div",null,e("pd-button",{label:"Use general clue",onClick:this.useGeneralClue.bind(this),disabled:!this.isGeneralClueAllowed(),primary:!0})),e("div",null,e("pd-button",{label:"Use specific clue",onClick:this.useSpecificClue.bind(this),disabled:!this.isSpecificClueAllowed(),primary:!0})))),e("p",{class:"rules-version"},"Rules version: 0.3"),e("aside",{id:"game-over-dialog",class:"mdc-dialog",role:"alertdialog","aria-labelledby":"my-mdc-dialog-label","aria-describedby":"my-mdc-dialog-description"},e("div",{class:"mdc-dialog__surface"},e("header",{class:"mdc-dialog__header"},e("h2",{class:"mdc-dialog__header__title"},this.resultHeading)),e("section",{class:"mdc-dialog__body"},this.resultText),e("footer",{class:"mdc-dialog__footer"},e("pd-button",{label:this.resultButtonLabel,primary:!0,onClick:this.closeDialog.bind(this)}))),e("div",{class:"mdc-dialog__backdrop"})))}isFeedingAllowed(){return this.isRunning&&this.feedTimer<=h}isGeneralClueAllowed(){return this.isRunning&&this.remainingClues>=d}isSpecificClueAllowed(){return this.isRunning&&this.remainingClues>=c}resetGame(){clearInterval(this.intervalHandle),this.isRunning=!1,this.gameTimer=this.initialGameTimer,this.feedTimer=this.initialFeedTimer,this.successesUntilVictory=this.goalNumberOfSuccesses,this.remainingClues=this.initialNumberOfClues}setDifficulty(e){this.initialFeedTimer=e.initialFeedTimer*t,this.initialGameTimer=e.initialGameTimer*t,this.goalNumberOfSuccesses=e.goalNumberOfSuccesses,this.difficultyLevel=e.name,this.resetGame()}startGame(){this.isRunning=!0,this.clueTimer<1&&this.setClueTimer(),this.intervalHandle=setInterval(()=>{this.gameTimer-=1,this.feedTimer-=1,this.clueTimer-=1,this.clueTimer<1&&(this.remainingClues+=1,this.setClueTimer()),(this.feedTimer<1||this.gameTimer<1)&&(this.isRunning=!1,clearInterval(this.intervalHandle),this.gameOver(u))},1e3)}pauseGame(){clearInterval(this.intervalHandle),this.isRunning=!1}playOrPause(){this.isRunning?this.pauseGame():this.startGame()}feed(){this.feedTimer=this.initialFeedTimer-this.feedTimer}logSuccess(){this.successesUntilVictory-=1,this.successesUntilVictory<1&&(clearInterval(this.intervalHandle),this.isRunning=!1,this.gameOver(r))}useGeneralClue(){this.remainingClues-=d}useSpecificClue(){this.remainingClues-=c}setClueTimer(){this.clueTimer=Math.round(5*Math.random()+15)}gameOver(e){this.resultHeading=e.heading,this.resultText=e.text,this.resultButtonLabel=e.buttonLabel,this.resetGame(),this.dialog.show()}closeDialog(){this.dialog.close()}static get is(){return"app-home"}static get properties(){return{clueTimer:{state:!0},dialog:{state:!0},difficultyLevel:{state:!0},feedingClass:{state:!0},feedTimer:{state:!0},gameTimer:{state:!0},generalCluesDisabled:{state:!0},goalNumberOfSuccesses:{state:!0},htmlElement:{elementRef:!0},initialFeedTimer:{state:!0},initialGameTimer:{state:!0},initialNumberOfClues:{state:!0},intervalHandle:{state:!0},isRunning:{state:!0},remainingClues:{state:!0},resultButtonLabel:{state:!0},resultHeading:{state:!0},resultText:{state:!0},specificCluesDisabled:{state:!0},successesUntilVictory:{state:!0}}}static get style(){return".mdc-dialog{display:-webkit-box;display:-ms-flexbox;display:flex;position:fixed;top:0;left:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;visibility:hidden;z-index:5}.mdc-dialog__backdrop{background-color:rgba(0,0,0,.87);background-color:var(--mdc-theme-text-primary-on-light,rgba(0,0,0,.87));position:fixed;top:0;left:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;opacity:0;z-index:-1}.mdc-dialog__surface{-webkit-box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);background-color:#fff;background-color:var(--mdc-theme-background,#fff);display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:calc(100% - 30px);min-width:640px;max-width:865px;-webkit-transform:translateY(150px) scale(.8);transform:translateY(150px) scale(.8);border-radius:2px;opacity:0}.mdc-dialog[dir=rtl] .mdc-dialog__surface,[dir=rtl] .mdc-dialog .mdc-dialog__surface{text-align:right}.mdc-dialog__header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:24px 24px 0}.mdc-dialog[dir=rtl] .mdc-dialog__header,[dir=rtl] .mdc-dialog .mdc-dialog__header{text-align:right}.mdc-dialog__header__empty{padding:0}.mdc-dialog__header__title{font-family:cartoons_123regular;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;line-height:2rem;font-weight:500;letter-spacing:.0125em;text-decoration:inherit;text-transform:inherit;-webkit-box-flex:1;-ms-flex:1;flex:1;margin:0}.mdc-dialog__body{color:rgba(0,0,0,.54);color:var(--mdc-theme-text-secondary-on-light,rgba(0,0,0,.54));font-family:cartoons_123regular;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.5rem;font-weight:400;letter-spacing:.03125em;text-decoration:inherit;text-transform:inherit;margin-top:20px;padding:0 24px 24px}.mdc-dialog__body--scrollable{max-height:195px;border-top:1px solid rgba(0,0,0,.1);border-bottom:1px solid rgba(0,0,0,.1);overflow-x:auto;overflow-y:scroll;-webkit-overflow-scrolling:touch}.mdc-dialog__footer{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:8px}.mdc-dialog__footer__button{margin-left:0;margin-right:8px}.mdc-dialog__footer__button[dir=rtl],[dir=rtl] .mdc-dialog__footer__button{margin-left:8px;margin-right:0}.mdc-dialog__footer__button:last-child{margin-left:0;margin-right:0}.mdc-dialog__footer__button:last-child[dir=rtl],[dir=rtl] .mdc-dialog__footer__button:last-child{margin-left:0;margin-right:0}.mdc-dialog__action:not(:disabled){color:#e8b63d;color:var(--mdc-theme-secondary,#e8b63d)}\@media (max-width:640px){.mdc-dialog,.mdc-dialog__surface{min-width:280px}.mdc-dialog__body{line-height:24px}}.mdc-dialog--animating{visibility:visible}.mdc-dialog--animating .mdc-dialog__backdrop{-webkit-transition:opacity 120ms 0s cubic-bezier(0,0,.2,1);transition:opacity 120ms 0s cubic-bezier(0,0,.2,1)}.mdc-dialog--animating .mdc-dialog__surface{-webkit-transition:opacity 120ms 0s cubic-bezier(0,0,.2,1),-webkit-transform 120ms 0s cubic-bezier(0,0,.2,1);transition:opacity 120ms 0s cubic-bezier(0,0,.2,1),-webkit-transform 120ms 0s cubic-bezier(0,0,.2,1);transition:opacity 120ms 0s cubic-bezier(0,0,.2,1),transform 120ms 0s cubic-bezier(0,0,.2,1);transition:opacity 120ms 0s cubic-bezier(0,0,.2,1),transform 120ms 0s cubic-bezier(0,0,.2,1),-webkit-transform 120ms 0s cubic-bezier(0,0,.2,1)}.mdc-dialog--open{visibility:visible}.mdc-dialog--open .mdc-dialog__backdrop{opacity:.3}.mdc-dialog--open .mdc-dialog__surface{-webkit-transform:translateY(0) scale(1);transform:translateY(0) scale(1);opacity:1}.mdc-dialog-scroll-lock{overflow:hidden}.app-home{margin-left:auto;margin-right:auto;max-width:500px;text-align:center;padding:66px 10px 10px}.warning{color:#f3847e}.difficulty-controls,.game-controls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:1em}.timers{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.timers>div{margin-left:10px;margin-right:10px;text-align:center}.timers>div>.timer{font-size:36px;margin-bottom:.5em;margin-top:.5em}.successes{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;margin-top:1em}.successes>div{margin-left:10px;margin-right:10px}.successes>.counter{font-size:36px}.clue-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-ms-flex-wrap:wrap;flex-wrap:wrap}.clue-buttons>div{margin-bottom:1em;margin-left:10px;margin-right:10px}.rules-version{color:#b2b3b4;font-size:10px}"}}export{o as AppHome};